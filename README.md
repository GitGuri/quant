# Quantilytix Frontend

React 19 + TypeScript + Vite application that powers the Quantilytix web experience.  
The PWA is deployed to **Render** at `https://quantilytix.onrender.com` and is currently being wrapped into an Android app via **Bubblewrap / Trusted Web Activity**.

---

## Project Structure

| Path | Description |
|------|-------------|
| `src/` | React application (pages, components, contexts, hooks) |
| `public/` | PWA assets (manifest icons, service worker) |
| `app/` | Android project generated by Bubblewrap |
| `twa-manifest.json` | Bubblewrap manifest (maps PWA → Android app metadata) |
| `build.gradle`, `settings.gradle`, `gradle/` | Gradle wrapper & root build files required for the Android build |
| `install-android-sdk.ps1` | Script that installs Android command-line tools + required SDK components |
| `INSTALL_ANDROID_SDK.md` | Manual instructions for the same process |

---

## Prerequisites

### Web
- Node.js 18+
- npm 10+

### Android build
- Java JDK 11 or higher
- Android SDK command-line tools (install via `install-android-sdk.ps1`)
- Bubblewrap CLI (`npm install -g @bubblewrap/cli`)

---

## Current Status (handover snapshot)

1. **PWA**  
   - Live at `https://quantilytix.onrender.com`  
   - Manifest + Service Worker already configured  
   - Icons (192px & 512px) available in `public/`

2. **Bubblewrap project**  
   - Initialized (`twa-manifest.json`, `app/`, Gradle wrapper)  
   - Android keystore generated locally (`android.keystore`, intentionally gitignored – share securely if needed)  
   - First build failed earlier only because SDK packages were missing (script now installs them)

3. **SDK setup**  
   - `install-android-sdk.ps1` automates download, PATH setup, license acceptance, and installs:
     - Build Tools 35.0.0
     - Android Platform 35
     - Platform Tools

---

## What’s Left to Ship the Android App

1. **Re-run the Bubblewrap build** (now that SDK is installed)
   ```powershell
   cd C:\Users\LEEROY\Pictures\quantfrontnow
   bubblewrap build --release
   ```
   Outputs:
   - `app/build/outputs/apk/release/app-release.apk`
   - `app/build/outputs/bundle/release/app-release.aab`

2. **Generate Digital Asset Links**
   ```powershell
   keytool -list -v -keystore .bubblewrap/keystore.p12 -storetype PKCS12
   ```
   - Create `public/.well-known/assetlinks.json` with that SHA-256 fingerprint
   - Redeploy so `https://quantilytix.onrender.com/.well-known/assetlinks.json` serves it

3. **Install & test APK on a device**
   - Transfer `app-release.apk`, enable “Install unknown apps”, verify the TWA experience

4. **(Optional) Publish to Google Play**
   - Use `app-release.aab`
   - Prepare Play Console listing, privacy policy, screenshots, etc.

---

## Handy Scripts & Commands

```bash
# Install dependencies & run web app
npm install
npm run dev

# Build web assets
npm run build
npm run preview

# Install Android SDK + required components (PowerShell, run as admin)
./install-android-sdk.ps1

# Bubblewrap workflow
bubblewrap init --manifest=https://quantilytix.onrender.com/manifest.webmanifest
bubblewrap build --release          # APK + AAB
bubblewrap build                    # Debug APK
```

---

## Notes

- **Keystore**: `android.keystore` is ignored by git. Share it securely if another developer needs to publish updates.
- **SDK Cache**: `.gradle/`, `.bubblewrap/`, and build artifacts are ignored to keep the repo lean.
- **Outstanding Work**: focus on the four items listed in “What’s Left to Ship the Android App”.

Feel free to update this README as you make progress. Good luck!
